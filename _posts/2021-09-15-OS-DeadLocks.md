---
layout: post
title: DeadLocks [OS]
description: >
  [공룡책 정리] 데드락의 이해: Chapter 8. Deadlocks (Part 1)
  참고 <br>
  - https://www.inflearn.com/course/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EA%B3%B5%EB%A3%A1%EC%B1%85-%EC%A0%84%EA%B3%B5%EA%B0%95%EC%9D%98/lecture/65282?tab=curriculum
tags: [OS]
---

## 데드락(Deadlock)의 이해

## 데드락(Deadlock)의 이해

### 데드락(Deadlock)이란?
 프로세스가 자원을 얻지 못해 다음 처리를 하지 못하는 상태로  대기중인 쓰레드 또는 프로세스들이 다시는 그 상태를 변경시킬 수 없으면( 요청하는 자원이 다른 프로세스나 쓰레드에 의해 점유되어 있고 그들 도 다 대기상태에 있기 때문) 이런 상황을 ‘교착 상태’라고 한다. 시스템적으로 한정된 자원을 여러 곳에서 사용하려고 할 때 발생합니다.


### 데드락 발생 조건
데드락은 아래의 4가지 조건을 모두 만족할 때 발생한다.

 #### 상호배제(Mutual exclusion)
 
* 최소한 하나의 자원이 비공유 모드로 점유되어야 한다.
 

 #### 점유하며 대기(Hold-and-wait)

* 자원을 최소한 하나 점유하고, 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스가 존재해야 한다.
 
 #### 비선점(No preemption)

* 자원들을 선점할 수 없어야 한다. 즉 자원이 강제적으로 방출될 수 없고, 점유하고 있는 프로세스가 작업을 종료한 후 그 프로세스에 의해 자발적으로만 방출될 수 있다.
 
 #### 순환대기(Circular wait)

 * 대기 프로세스의 집합이 순환 형태로 대기하고 있어야 한다.

 ### 데드락의 해결법
데드락의 해결법을 크게 3가지로 분류할 수 있습니다.

* 데드락이 발생하지 않도록 예방(prevention) 하기
* 데드락 발생 가능성을 인정하면서도 적절하게 회피(avoidance) 하기
* 데드락 발생을 허용하지만 데드락을 탐지(detection)하여, 데드락에서 회복하기
 

 ### 데드락 
 데드락은 발생조건 4가지를 모두 만족하는 경우 발생하기 때문에 이 4가지 조건 중 하나만 발생하지 않도록 막아도 데드락을 예방할 수 있다.

 * 자원의 상호 배제 조건 방지 : 한 번에 여러 프로세스가 공유 자원을 사용할 수 있게 한다.

 그러나 일반적으로 상호 배제 조건 방지로 교착상태를 예방하는 것은 불가능하다. Mutex lock과 같이 어떤 자원들은 근본적으로 공유가 불가능하기 때문이다.
 
 * 점유 대기 조건 방지 : 프로세스 실행에 필요한 모든 자원을 한꺼번에 요구하고 허용할 때까지 작업을 보류해서, 나중에 또다른 자원을 점유하기 위한 대기 조건을 성립하지 않도록 합니다.

 * 비선점 조건 방지 : 이미 다른 프로세스에게 할당된 자원이 선점권이 없다고 가정할 때, 높은 우선순위의 프로세스가 해당 자원을 선점할 수 있도록 합니다.

 * 순환 대기 조건 방지 : 자원을 순환 형태로 대기하지 않도록 일정한 한 쪽 방향으로만 자원을 요구할 수 있도록 합니다.